# r074o5-webrtc

Продолжение темы webrtc: один отправляет, все смотрят («один ко многим»).

index.js - сервер (truruki.ru)
index.html - зритель (truruki.ru)
camera.html - транслятор (truruky.ru)

*******************************************

https://www.perplexity.ai/search/fail-index-html-imeet-kod-doct-4X5Q67HJTsy1F2VQuTdv1Q

*********************************************

***********************************************************

РАБОТАЕТ, НО НЕ СТАБИЛЬНО! 
ПРИ ПОДКЛЮЧЕНИИ НЕСКОЛЬКИХ КЛИЕНТОВ СЕРВИС ПАДАЕТ.
Ваш сервис падает при подключении двух клиентов, скорее всего, из-за того, что в текущей реализации клиента-транслятора (broadcaster) используется только один объект RTCPeerConnection (pc) на всех зрителей. При подключении второго клиента этот объект переопределяется, и сигналы и состояние WebRTC путаются, что вызывает сбои и падение сервиса.

Основные причины падения при подключении нескольких клиентов:

В коде broadcaster создаётся и хранится только одна переменная pc для RTCPeerConnection, которая заменяется при новом зрителе. Это не поддерживает одновременную работу с несколькими зрителями.

**********************************************************
ИИ:
https://www.perplexity.ai/search/konfig-nginx-server-listen-443-R.E5KMKvS6GF1agRrXVhtg

*******************************************************
СТАРЫЙ КОД (ПАДАЕТ ПРИ НЕСКОЛЬКИХ КЛИЕНТАХ) ТУТ:
1___index.js - сервер (truruki.ru)
1___index.html - зритель (truruki.ru)
1___camera.html - транслятор (truruky.ru)

********************************************************
В последнем варианте -ВСЕ клиенты работают по крайней мере 1 минуту без обновления.
